<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Esteira de N√∫meros ‚Äî Precis√£o Total</title>
  <style>
    :root {
      --green: #0f0;
      --red: #f00;
      --glass: rgba(255, 255, 255, 0.1);
      --highlight: gold;
    }

    body {
      margin: 0;
      font-family: sans-serif;
      background: linear-gradient(to bottom, #0a0, #500);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
      color: white;
    }

    .card {
      background: var(--glass);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 0 20px rgba(255,255,255,0.2);
    }

    .list-container {
      position: relative;
      height: 200px;
      overflow: hidden;
      margin: 20px 0;
    }

    .number-item {
      font-size: 2rem;
      height: 48px;
      line-height: 48px;
      text-align: center;
      box-sizing: border-box;
      width: 100%;
    }

    .number-list {
      display: flex;
      flex-direction: column;
      align-items: center;
      will-change: transform;
    }

    .highlight {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 48px;
      margin-top: -24px;
      border-top: 2px solid var(--highlight);
      border-bottom: 2px solid var(--highlight);
      pointer-events: none;
    }

    .buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 10px;
    }

    button {
      padding: 10px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: var(--highlight);
      color: black;
    }

    #winner {
      font-size: 1.5rem;
      margin-top: 10px;
    }

    .confetti {
      font-size: 2rem;
      animation: bounce 1s ease-out;
    }

    @keyframes bounce {
      0% { transform: scale(1); }
      50% { transform: scale(1.3); }
      100% { transform: scale(1); }
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>üéÑ Sorteio ‚Äî Esteira Vertical üéÅ</h1>

    <div class="list-container">
      <div class="highlight"></div>
      <div id="numberList" class="number-list"></div>
    </div>

    <div class="buttons">
      <button onclick="startDraw()">Sortear</button>
      <button onclick="randomize()">Randomizar</button>
    </div>

    <div id="winner">Vencedor: -</div>
    <div id="celebration"></div>
  </div>

  <script>
    const listEl = document.getElementById('numberList');
    const winnerEl = document.getElementById('winner');
    const celebrationEl = document.getElementById('celebration');

    const ITEM_HEIGHT = 48;
    const LOOPS = 5;
    const total = 20;

    let numbers = [];

    function pad(n) {
      return n.toString().padStart(3, '0');
    }

    function generateNumbers() {
      numbers = Array.from({ length: total }, () => pad(Math.floor(Math.random() * 999)));
    }

    function renderList() {
      listEl.innerHTML = '';

      const fullList = [];
      for (let i = 0; i < LOOPS; i++) fullList.push(...numbers);

      fullList.forEach(num => {
        const div = document.createElement('div');
        div.className = 'number-item';
        div.textContent = num;
        listEl.appendChild(div);
      });

      listEl.style.transform = 'translateY(0px)';
    }

    function randomize() {
      generateNumbers();
      renderList();
      winnerEl.textContent = 'Vencedor: -';
      celebrationEl.innerHTML = '';
    }

    function easeOutCubic(t) {
      return 1 - Math.pow(1 - t, 3);
    }

    function startDraw() {
      const winnerIndex = Math.floor(Math.random() * total);

      const finalIndex = winnerIndex + (total * (LOOPS - 2));

      const highlightOffset = (200 / 2) - (ITEM_HEIGHT / 2);

      const finalPosition = finalIndex * ITEM_HEIGHT - highlightOffset;

      const duration = 2500 + Math.random() * 500;

      const start = performance.now();

      function animate(time) {
        const p = Math.min((time - start) / duration, 1);
        const e = easeOutCubic(p);

        const y = e * finalPosition;
        listEl.style.transform = `translateY(-${y}px)`;

        if (p < 1) {
          requestAnimationFrame(animate);
        } else {
          listEl.style.transform = `translateY(-${finalPosition}px)`;
          winnerEl.textContent = `Vencedor: ${numbers[winnerIndex]}`;
          celebrationEl.innerHTML = '<div class="confetti">üéâ Parab√©ns! üéâ</div>';
        }
      }

      requestAnimationFrame(animate);
    }

    document.addEventListener('keydown', e => {
      if (e.key === 'Enter') startDraw();
    });

    randomize();
  </script>
</body>
</html>
